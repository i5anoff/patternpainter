<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Pattern Painter</title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
				font-family: sans-serif;
				box-sizing: border-box;
			}

			html {
				height: 100%;
			}

			body {
				background-color: #ffffff;
				margin: 0px;
				height: 100%;
				color: #555;
				overflow: hidden;
			}


			h1 {
				margin-top: 30px;
				margin-bottom: 40px;
				margin-left: 20px;
				font-size: 25px;
				font-weight: normal;
			}

			h2 {
				font-size: 20px;
				font-weight: normal;
			}

			a {
				color: #2194CE;
				text-decoration: none;
			}

			
			/* panel */
			#panel {
				position: fixed;
				left: 0px;
				width: 240px;
				height: 100%;
				overflow: auto;
				background: #fafafa;
			}

			#panel #content {
				padding: 0px 20px 20px 20px;
			}

			#panel #content .link {
				display: block;
				color: #2194CE;
				text-decoration: none;
				cursor: pointer;
			}

			#panel #content .selected {
				color: #ff0000;
			}

			#panel #content .link:hover {
				text-decoration: underline;
			}


			/* view */
			#viewer {
				position: absolute;
				left: 240px;
				width: calc( 100% - 240px );
				height: 100%;
				overflow: auto;
			}
			#painterview {
				width: 100%;
				height: 100%;
				border: none;
			}
		</style>
	</head>
<body>
	<!-- left list -->
	<section id="panel">
		<h1>PatternPainter</h1>
		<div id="content"></div>
	</section>

	<!-- main view -->
	<section id="viewer">
		<iframe id="painterview" name="painterview" allowfullscreen allowvr onmousewheel=""></iframe>
	</section>

	<script src="files.js"></script>
	<script type="text/javascript">

		var container = document.createElement('div');
		content.appendChild( container );

		var links = {};
		var selected = null;

		for ( var key in files ) {

			var section = files[ key ];

			var header = document.createElement( 'h2' );
			header.textContent = key;
			header.setAttribute( 'data-category', key );
			container.appendChild( header );

			for ( var i = 0; i < section.length; i ++ ) {

				var file = section[ i ];

				var link = createLink( file );
				container.appendChild( link );

				links[ file ] = link;

			}

		}

		function createLink(file) {

			var link = document.createElement( 'a' );

			link.className = 'link';
			link.href = './paints/' + file + '.html';
			link.textContent = file;
			link.setAttribute( 'target', 'painterview' );
			link.addEventListener( 'click', function ( event ) {

				if ( event.button === 0 ) {

					selectFile( file );

				}

			} );

			return link;
			
		}

		function selectFile(file) {

			// if ( selected !== null ) {
			// 	links[ selected ].classList.remove( 'selected' );
			// }

			// links[ file ].classList.add( 'selected' );

			window.location.hash = file;
			painterview.focus();
			painterview.src = file + '.html';


			// panel.classList.add( 'collapsed' );

			selected = file;
		}
	</script>
</body>
</html>